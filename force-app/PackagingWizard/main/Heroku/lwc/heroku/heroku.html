<template>
    <li class={itemCls}>
        <article class="slds-setup-assistant__step">
            <div class={detailCls}>
                <button
                    class="slds-button slds-button_icon slds-m-right_x-small slds-m-top_x-small"
                    title={labels.toggleDetails}
                    aria-expanded="false"
                    onclick={handleOpen}
                    disabled={disabled}
                >
                    <lightning-icon
                        icon-name="utility:switch"
                        alternative-text={labels.toggleDetails}
                        size="x-small"
                        class="slds-button__icon slds-summary-detail__action-icon"
                        aria-hidden="true"
                    ></lightning-icon>
                </button>
                <div class="slds-container_fluid">
                    <div class="slds-summary-detail__title">
                        <div class="slds-setup-assistant__step-summary">
                            <div class="number percentage">
                                <c-step-status
                                    number={inx}
                                    progress={progress}
                                    complete={valid}
                                    if:false={loading}
                                ></c-step-status>
                                <c-preloader if:true={loading} width="2rem" height="2rem"></c-preloader>
                                <div class="slds-media__body slds-m-top_x-small">
                                    <div class="slds-media">
                                        <div class="slds-setup-assistant__step-summary-content slds-media__body">
                                            <h3
                                                class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                                            >
                                                {title}
                                            </h3>
                                            <p>
                                                {desc}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div aria-hidden="false" class="slds-summary-detail__content" id="step-1-summary-action">
                        <div class="slds-setup-assistant__step-detail">
                            <div class="slds-progress slds-progress_vertical slds-progress_success">
                                <ol class="slds-progress__list slds-progress__list-bordered">
                                    <template for:each={substeps} for:item="item">
                                        <c-ui-sub-step
                                            key={item.name}
                                            name={item.name}
                                            title={item.title}
                                            description={item.description}
                                            right-button={item.rightButton}
                                            right-text={item.rightText}
                                            components={item.components}
                                            valid={item.valid}
                                            active={item.active}
                                            class={item.styleCls}
                                            loading={loading}
                                            substep-rerender={substepRerender}
                                            step-by-step={stepByStep}
                                            onchange={handleChangeValue}
                                            onbuttonclick={handleButtonClick}
                                            onrbuttonclick={handleRightButtonClick}
                                        ></c-ui-sub-step>
                                    </template>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </li>
</template>
